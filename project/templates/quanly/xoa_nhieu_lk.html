{% extends 'quanly/base_quanly.html' %}

{% block quanly_content %}
<h2>Xóa linh kiện</h2>

<p>Chọn các linh kiện muốn xoá và nhấn nút Xoá.</p>

<form action="{{ url_for('quanly_linhkien_delete_multi') }}" method="POST"
      onsubmit="return confirm('Bạn có chắc muốn xoá các linh kiện đã chọn?');">

<table class="table table-bordered">
    <thead>
        <tr>
            <th>Chọn</th>
            <th>ID</th>
            <th>Tên linh kiện</th>
            <th>Giá</th>
        </tr>
    </thead>
    <tbody>
        {% for lk in linhkiens.items %}
        <tr>
            <td><input type="checkbox" name="ids" value="{{ lk.id }}"></td>
            <td>{{ lk.id }}</td>
            <td>{{ lk.ten_linh_kien }}</td>
            <td>{{ lk.gia }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- PHÂN TRANG -->
<nav>
    <ul class="pagination">
        {% if linhkiens.has_prev %}
        <li class="page-item">
            <a class="page-link" href="{{ url_for('quanly_linhkien_delete_multi', page=linhkiens.prev_num) }}">«</a>
        </li>
        {% endif %}

        {% for p in linhkiens.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
            {% if p %}
                {% if p == linhkiens.page %}
                <li class="page-item active"><a class="page-link">{{ p }}</a></li>
                {% else %}
                <li class="page-item"><a class="page-link" href="{{ url_for('quanly_linhkien_delete_multi', page=p) }}">{{ p }}</a></li>
                {% endif %}
            {% else %}
                <li class="page-item disabled"><a class="page-link">…</a></li>
            {% endif %}
        {% endfor %}

        {% if linhkiens.has_next %}
        <li class="page-item">
            <a class="page-link" href="{{ url_for('quanly_linhkien_delete_multi', page=linhkiens.next_num) }}">»</a>
        </li>
        {% endif %}
    </ul>
</nav>


<button type="submit" class="btn btn-danger">Xóa các linh kiện</button>
<a href="{{ url_for('quanly_linhkien') }}" class="btn btn-secondary ms-2">Quay lại</a>
</form>

<script>
function toggleAll(source) {
    const checkboxes = document.querySelectorAll('input[name="ids[]"]');
    checkboxes.forEach(cb => cb.checked = source.checked);
}
</script>

{% endblock %}
